<!DOCTYPE html>
<html>
  <head>
    <title>Oppgave 5</title>
    <style>
      canvas {
        background: black;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script>
      let bubbleList = [];
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      canvas.addEventListener("click", n => bubbleList.push(new bubble(n.clientX, n.clientY)));

      class bubble {
        constructor(x, y) {

          let p = 1;
          this.x = x;
          this.y = y;
          this.color = this.getColor();
          this.r = Math.floor((Math.random() * 40) + 25);
          this.v = Math.PI * Math.pow(this.r, 2);
          this.m = p * v;
          
          //this.speed = Math.floor((Math.random() * 5) + 2);

          this.speed = Math.sqrt(9.81 * (canvas.height - this.y));

        }

        getColor() {
          let n = "0123456789ABCDEF";
          let list = ""
          for (let i = 0; i < 6; i++) {
            list += n[Math.floor(Math.random() * n.length)];
          }
          return "#" + list;
        }

        draw() {
          ctx.beginPath();
          ctx.fillStyle = this.color;
          ctx.arc(this.x,this.y,this.r, 0, Math.PI * 2);
          ctx.fill();
        }

        move() {
          this.y += this.speed;

          if(this.y + this.r >= canvas.height) {
            this.y = canvas.height - this.r;
            this.speed *= -1;
          }
          if( this.y - this.r <= 0) {
            this.y = this.r;
            this.speed *= -1;
          }
        }
      }

      function drawBubbles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        bubbleList.forEach(n => {
          n.move();
          n.draw();
        });
        requestAnimationFrame(drawBubbles);
      }

      drawBubbles();



    </script>
  </body>
</html>

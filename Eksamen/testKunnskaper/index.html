<!DOCTYPE html>
<html>
  <head>
    <title>Test Kunnskaper</title>
    <style>
      .bilder {
        text-align: center;

      }
      img {
        border: 1px solid grey;
      }
    </style>
  </head>
  <body>
    <button type="button" id="knapp"> Spill av lyd </button>
    <div class="bilder">
      <img id="fagott"/>
      <img id="floyte"/>
      <img id="klarinett"/>
      <img id="obo"/>
      <img id="valthorn"/>
    </div>
    <h1 id="output"> </h1>

  <script>
    const fagott = document.getElementById("fagott");
    const floyte = document.getElementById("floyte");
    const klarinett = document.getElementById("klarinett");
    const obo = document.getElementById("obo");
    const valthorn = document.getElementById("valthorn");
    const knapp = document.getElementById("knapp");
    const instrumenter = ["medier/fagott.jpg", "medier/floyte.jpg", "medier/klarinett.jpg", "medier/obo.jpg", "medier/valthorn.jpg"];
    let lyder = ["medier/fagott.mp3","medier/floyte.mp3","medier/klarinett.mp3","medier/obo.mp3", "medier/valthorn.mp3"];
    let ins = ["fagott", "floyte", "klarinett", "obo", "valthorn"];
    fagott.src = instrumenter[0];
    floyte.src = instrumenter[1];
    klarinett.src = instrumenter[2];
    obo.src = instrumenter[3];
    valthorn.src = instrumenter[4];
    let nesteLyd = true;
    let index;
    let banList = [];
    let clip;
    let points, mis = 0;
    knapp.onclick = () => {
      if (nesteLyd) {
        index = Math.floor(Math.random() * lyder.length);
        for (i = 0; i < banList.length; i++) {
          if (index == banList[i]) {
            console.log("k");
            knapp.onclick();

          }
        }
        nesteLyd = false;
      }
      clip = new Audio(lyder[index]);
      console.log(index);
      clip.play();
    }

    fagott.onclick = () => {
      if (index == 0) {
        riktig();
      }
      else {
        feil();
      }
    }
    floyte.onclick = () => {
      if (index == 1) {
        riktig();
      }
      else {
        feil();
      }
    }
    klarinett.onclick = () => {
      if (index == 2) {
        riktig();
      }
      else {
        feil();
      }
    }
    obo.onclick = () => {
      if (index == 3) {
        riktig();
      }
      else {
        feil();
      }
    }
    valthorn.onclick = () => {
      if (index == 4) {
        riktig();
      }
      else {
        feil();
      }
    }


    function seier() {

      document.getElementById("output").innerText = `Du hadde ${mis} feil`;
    }

    function riktig() {
      clip.pause();
      let win = new Audio("medier/riktig.mp3");
      win.play();
      banList.push(index);
      document.getElementById(ins[index]).style.display = "none";
      nesteLyd = true;
      points += 1;
      if (banList.length == ins.length) {
        seier();
      }
    }

    function feil() {
      clip.pause();
      let loose = new Audio("medier/feil.mp3");
      loose.play();
      nesteLyd = true;
      mis += 1;
    }

    function restart() {
      fagott.style.display = "inline";
      floyte.style.display = "inline";
      klarinett.style.display = "inline";
      obo.style.display = "inline";
      valthorn.style.display = "inline";
    }

  </script>
  </body>
</html>
